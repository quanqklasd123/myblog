<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>5. Event Loop & Microtasks: Bí Mật Của V8 Engine</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <header class="blog-header" style="background:#1a1a1a;padding:1rem 0 0 0;text-align:center;">
        <h1 style="color:#fff;margin:0;font-size:2em;">Kho Tàng Kiến Thức</h1>
        <p style="color:#b0b0b0;margin:0 0 10px 0;font-size:1.1em;">Tổng hợp bài viết về Java và JavaScript</p>
        <div style="background:#2d2d2d;padding:0.5rem 0;margin-top:10px;">
            <nav style="text-align:center;">
                <a href="../index.html"
                    style="color:#fff;text-decoration:none;padding:0.5rem 1rem;margin:0 5px;display:inline-block;border-radius:4px;transition:background 0.2s;">Trang
                    Chủ</a>
                <a href="../blogs.html"
                    style="color:#fff;text-decoration:none;padding:0.5rem 1rem;margin:0 5px;display:inline-block;border-radius:4px;transition:background 0.2s;">Blogs</a>
                <a href="../projects.html"
                    style="color:#fff;text-decoration:none;padding:0.5rem 1rem;margin:0 5px;display:inline-block;border-radius:4px;transition:background 0.2s;">Dự
                    Án Cá Nhân</a>
                <a href="../contact.html"
                    style="color:#fff;text-decoration:none;padding:0.5rem 1rem;margin:0 5px;display:inline-block;border-radius:4px;transition:background 0.2s;">Liên
                    Hệ</a>
            </nav>
        </div>
    </header>
    <article class="blog-detail">
        <h1>5. Event Loop & Microtasks: Bí Mật Của V8 Engine</h1>
        <p><em>Ngày đăng: 19/12/2025 | Chủ đề: JavaScript Deep Dive</em></p>
        <section>
            <p>Để hiểu thứ tự chạy code JS, bạn phải hiểu 2 hàng đợi này:</p>
            <h3>1. Macrotask Queue (Task Queue)</h3>
            <p>Bao gồm: <code>setTimeout</code>, <code>setInterval</code>, <code>setImmediate</code> (Node.js), I/O, UI
                rendering.</p>
            <h3>2. Microtask Queue (Job Queue)</h3>
            <p>Bao gồm: <code>Promise.then/catch/finally</code>, <code>queueMicrotask</code>,
                <code>MutationObserver</code>.
            </p>
            <h3>Quy tắc vàng:</h3>
            <p><strong>Microtask luôn được ưu tiên chạy hết trước khi chuyển sang Macrotask tiếp theo.</strong></p>
            <p>Sau mỗi lần Call Stack rỗng, Event Loop sẽ check Microtask Queue trước. Nếu có, chạy hết sạch chúng, rồi
                mới lấy 1 cái từ Macrotask Queue ra chạy.</p>
            <pre><code>console.log(1);
setTimeout(() => console.log(2), 0); // Macrotask
Promise.resolve().then(() => console.log(3)); // Microtask
console.log(4);

// Output: 1 -> 4 -> 3 -> 2</code></pre>
        </section>
    </article>
    <a href="../blogs.html">← Quay lại danh sách blog</a>
</body>

</html>